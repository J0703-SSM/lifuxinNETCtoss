<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.lanou.mapper.AdminMapper">

    <resultMap id="rolesByAdminInfos" type="com.lanou.domain.Admin_info">
        <id column="admin_id" property="admin_id"/>
        <result column="admin_code" property="admin_code"/>
        <result column="password" property="password"/>
        <result column="name" property="name"/>
        <result column="telephone" property="telephone"/>
        <result column="email" property="email"/>
        <result column="enrolldate" property="enrolldate"/>
        <!--<collection property="admin_roles"-->
                    <!--ofType="com.lanou.domain.Admin_role">-->
            <!--<id column="admin_id" property="admin_id"/>-->
            <!--<result column="role_id" property="role_id"/>-->
        <!--</collection>-->
        <collection property="role_infos"
                    ofType="com.lanou.domain.Role_info">
            <id column="role_id" property="role_id"/>
            <result column="role_name" property="role_name"/>
        </collection>
    </resultMap>
    <sql id="admin_infoSql">
        admin_info.admin_id,
        admin_info.admin_code,
        admin_info.password,
        admin_info.name,
        admin_info.telephone,
        admin_info.email,
        admin_info.enrolldate
    </sql>
    <!--<sql id="admin_roleSql">-->
         <!--admin_role.admin_id,-->
        <!--admin_role.role_id-->
    <!--</sql>-->
    <sql id="role_infoSql">
        role_info.role_id,
        role_info.role_name
    </sql>
    <select id="findAll"
            resultMap="rolesByAdminInfos">
        SELECT
        <include refid="admin_infoSql"/>,
        <include refid="role_infoSql"/>
        FROM admin_info,admin_role,role_info
        WHERE admin_info.admin_id=admin_role.admin_id
        AND admin_role.role_id=role_info.role_id
    </select>


</mapper>